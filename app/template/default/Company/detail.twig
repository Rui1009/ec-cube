{% extends 'default_frame.twig' %}

{% set body_class = 'company_detail_page' %}

{% block main %}
{% form_theme form 'Form/form_div_layout.twig' %}
    <div class="ec-headerNaviRole">
        <div class="ec-headerSearch">
            <form method="get" class="searchform" action="{{ path('company_list') }}">
                <div class="ec-headerSearch__category">
                    <div class="ec-select ec-select_search">
                        {{ form_widget(form.category_id, {'id': null, 'attr': {'class': 'category_id'}}) }}
                    </div>
                </div>
                <div class="ec-headerSearch__keyword">
                    <div class="ec-input">
                        {{ form_widget(form.name, {'id': null, 'attr': {'class': 'search-name', 'placeholder' : 'common.search_keyword' }} ) }}
                        <button class="ec-headerSearch__keywordBtn" type="submit">
                            <div class="ec-icon">
                                <img src="{{ asset('assets/icon/search-dark.svg') }}" alt="">
                            </div>
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div class="ec-headerNaviRole__right">
            <div class="ec-headerNaviRole__nav">
                {{ include('Block/login.twig') }}
            </div>
            <div class="ec-headerRole__cart">
                {{ include('Block/cart.twig') }}
            </div>
        </div>
    </div>
    <div class="ec-headerRole">
        <div class="ec-headerRole__title">
            <div class="ec-headerTitle">
                <div class="ec-headerTitle__title">
                    <h1>
                        <a href="{{ url('homepage') }}">
                            {{ BaseInfo.shop_name }}
                        </a>
                    </h1>
                </div>
            </div>
        </div>
    </div>
    <div class="ec-subHeaderRole">
        <ul class="ec-subHeaderRole__subHeaderlist">
            <li class="ec-subHeaderRole__item">
                <a href="{{ path('product_list')  }}">{{ 'front.move.to.product.list'|trans }}</a>
            </li>
            <li class="ec-subHeaderRole__item">
                <a href="{{ path('company_list') }}">{{ 'front.move.to.company.list'|trans }}</a>
            </li>
        </ul>
    </div>
    <div class="ec-productRole">
        <div class="ec-grid2">
            <div class="ec-grid2__cell">
                <div class="ec-sliderItemRole">
                    <div class="item_visual">
{#                        会社の画像#}
                        <div class="slide-item"><img src=""/></div>
                    </div>
                </div>
            </div>
            <div class="ec-grid2__cell">
                <div class="ec-productRole__title">
                    <h2 class="ec-headingTitle">{{ Company.name }}</h2>
                </div>
                {% if Company.CompanyCategories is not empty %}
                    <div class="ec-productRole__category">
                        <div>{{ 'front.product.related_category'|trans }}</div>
                        {% for CompanyCategory in Company.CompanyCategories %}
                            <ul>
                                <li>
                                    {% for Category in CompanyCategory.CategoryCompany.path %}
                                        <a href="{{ url('company_list') }}?category_id={{ Category.id }}">{{ Category.name }}</a> {%- if loop.last == false %}
                                        <span>＞</span>{% endif -%}
                                    {% endfor %}
                                </li>
                            </ul>
                        {% endfor %}
                    </div>
                {% endif %}
                <div class="ec-productRole__description">{{ Company.description|raw|nl2br }}
                </div>
            </div>
        </div>
{#        <h2>{{ Company.name }}</h2>#}
{#        <div>#}
{#            {{ Company.description }}#}
{#        </div>#}
{#        {% for Product in Products %}#}
{#            <a href="/products/detail/{{ Product.id }}">#}
{#                <h4>{{ Product.name }}</h4>#}
{#            </a>#}
{#        {% endfor %}#}
        <h3>{{ Company.name }}の全ての商品</h3>
        <div class="ec-shelfRole">
            <ul class="ec-shelfGrid">
                {% for Product in Products %}
                    <li class="ec-shelfGrid__item">
                        <a href="{{ url('product_detail', {'id': Product.id}) }}">
                            <p class="ec-shelfGrid__item-image">
                                <img src="{{ asset(Product.main_list_image|no_image_product, 'save_image') }}">
                            </p>
                            <p>{{ Product.name }}</p>
                            {% if Product.description_list %}
                                <p>{{ Product.description_list|raw|nl2br }}</p>
                            {% endif %}
                            <p class="price02-default">
                                {% if Product.hasProductClass %}
                                    {% if Product.getPrice02Min == Product.getPrice02Max %}
                                        {{ Product.getPrice02IncTaxMin|price }}
                                    {% else %}
                                        {{ Product.getPrice02IncTaxMin|price }} ～ {{ Product.getPrice02IncTaxMax|price }}
                                    {% endif %}
                                {% else %}
                                    {{ Product.getPrice02IncTaxMin|price }}
                                {% endif %}
                            </p>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

{% endblock %}
